# Owokx Environment Variables
# Copy this file to .dev.vars and fill in your values

# =============================================================================
# Broker Selection
# Choose your broker: "alpaca" or "okx"
# =============================================================================
BROKER_PROVIDER=alpaca

# =============================================================================
# Alpaca Trading API (Required for BROKER_PROVIDER=alpaca)
# Get your keys at: https://app.alpaca.markets/paper/dashboard/overview
# =============================================================================
ALPACA_API_KEY=your_alpaca_api_key_here
ALPACA_API_SECRET=your_alpaca_api_secret_here

# IMPORTANT: Set to "true" for paper trading (recommended for testing)
# Set to "false" only when you're ready to trade with real money
ALPACA_PAPER=true

# =============================================================================
# OKX API (Required for BROKER_PROVIDER=okx)
# Docs: https://www.okx.com/docs-v5/
# Create API keys at: https://www.okx.com/account/my-api
# Demo trading: set OKX_SIMULATED_TRADING=true (requires demo-enabled API key)
# =============================================================================
OKX_API_KEY=your_okx_api_key_here
OKX_SECRET=your_okx_secret_here
OKX_PASSPHRASE=your_okx_passphrase_here
# Region domain must match the account where the API key was created:
# Global: https://www.okx.com
# US:     https://us.okx.com (or https://app.okx.com)
# EEA:    https://eea.okx.com (or https://my.okx.com)
OKX_BASE_URL=https://www.okx.com
OKX_SIMULATED_TRADING=false
# Demo-only virtual cash/buying power overlay:
# - Enabled by default when OKX_SIMULATED_TRADING=true.
# - Prevents demo runs from being blocked when quote balance is empty.
# - Ignored in live trading (OKX_SIMULATED_TRADING=false).
OKX_DEMO_VIRTUAL_BALANCES=true
OKX_DEMO_VIRTUAL_CASH_USD=200
OKX_DEMO_VIRTUAL_BUYING_POWER_USD=200
OKX_DEFAULT_QUOTE_CCY=USDT
OKX_MAX_REQUESTS_PER_SECOND=5
OKX_MAX_RETRIES=2

# =============================================================================
# API Authentication (Required)
# Generate a secure token with: openssl rand -base64 48
# =============================================================================
OWOKX_API_TOKEN=generate_a_secure_api_token_here
OWOKX_API_TOKEN_ADMIN=generate_admin_token_here
OWOKX_API_TOKEN_TRADE=generate_trade_token_here
OWOKX_API_TOKEN_READONLY=generate_readonly_token_here

# =============================================================================
# LLM Provider Configuration
# Choose one of the three provider modes:
# =============================================================================

# Provider Mode (default: "openai-raw")
# - "openai-raw": Direct OpenAI API (simplest, uses OPENAI_API_KEY only)
# - "ai-sdk": Vercel AI SDK with multiple providers (OpenAI, Anthropic, Google, xAI, DeepSeek)
# - "cloudflare-gateway": Cloudflare AI Gateway (OpenAI-compatible /compat endpoint)
LLM_PROVIDER=openai-raw

# Model (format depends on provider mode)
# - openai-raw: "gpt-4o-mini", "gpt-4o", etc.
# - ai-sdk/cloudflare-gateway: "provider/model" e.g. "openai/gpt-4o", "anthropic/claude-sonnet-4"
LLM_MODEL=gpt-4o-mini

# --- Option 1: OpenAI Direct (openai-raw) ---
# Get your key at: https://platform.openai.com/api-keys
# Optional: override OpenAI API base URL (useful for OpenAI-compatible proxies)
# OPENAI_BASE_URL=https://api.openai.com/v1
# OPENAI_BASE_URL=https://openrouter.ai/api/v1
OPENAI_API_KEY=sk-your_openai_api_key_here

# --- Option 2: AI SDK (ai-sdk) ---
# Set API keys for providers you want to use (at least one required)
# ANTHROPIC_API_KEY=sk-ant-your_anthropic_key_here
# GOOGLE_GENERATIVE_AI_API_KEY=your_google_ai_key_here
# XAI_API_KEY=xai-your_xai_key_here
# DEEPSEEK_API_KEY=sk-your_deepseek_key_here

# --- Option 3: Cloudflare AI Gateway (cloudflare-gateway) ---
# Configure your gateway in Cloudflare and use BYOK/Unified Billing with a gateway token.
# CLOUDFLARE_AI_GATEWAY_ACCOUNT_ID=your_cloudflare_account_id
# CLOUDFLARE_AI_GATEWAY_ID=your_gateway_id_or_name
# CLOUDFLARE_AI_GATEWAY_TOKEN=your_cloudflare_ai_gateway_token

# =============================================================================
# Social Media APIs (Optional - for signal confirmation)
# =============================================================================

# Twitter/X API (Optional)
# Get your bearer token at: https://developer.x.com/
# NOTE: Twitter API costs ~$0.005-0.01 per read. The agent is configured to 
# use max 200 reads/day (~$1-2/day) and only for confirming high-quality signals.
# Leave blank to disable Twitter integration.
TWITTER_BEARER_TOKEN=

# X (Twitter) Bearer Token (Alternative to TWITTER_BEARER_TOKEN)
X_BEARER_TOKEN=

# StockTwits API (Optional)
# Get your API token at: https://api.stocktwits.com/developers
STOCKTWITS_API_TOKEN=

# Reddit API (Optional)
# Create app at: https://www.reddit.com/prefs/apps
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=

# =============================================================================
# Discord Notifications (Optional)
# =============================================================================
DISCORD_WEBHOOK_URL=

# =============================================================================
# Security
# =============================================================================

# Emergency kill switch secret (separate from API token)
# Generate with: openssl rand -base64 48
KILL_SWITCH_SECRET=generate_a_random_string_here

# Kill switch activation flag (set to "true" to disable all trading)
KILL_SWITCH_ACTIVE=false

# Approval signing secret for trade approvals
# Generate with: openssl rand -base64 48
APPROVAL_SIGNING_SECRET=generate_approval_secret_here

# =============================================================================
# Cloudflare Configuration (Optional)
# =============================================================================

# Cloudflare API Token (for deployment scripts)
# Get at: https://dash.cloudflare.com/profile/api-tokens
CLOUDFLARE_API_TOKEN=

# Cloudflare Account ID (for deployment scripts)
# Found in: https://dash.cloudflare.com/ -> Your account -> Account ID
CLOUDFLARE_ACCOUNT_ID=

# =============================================================================
# Development & Deployment (Optional)
# =============================================================================

# Worker URL (for dashboard and scripts)
# Default: http://127.0.0.1:8787 (local development)
# Production: https://your-worker.your-subdomain.workers.dev
OWOKX_WORKER_URL=

# Dashboard API URL (for Kubernetes deployments)
# Default: same as OWOKX_WORKER_URL
OWOKX_API_URL=

# Allowed email addresses for access control (comma-separated)
# Example: user1@example.com,user2@example.com
OWOKX_ALLOWED_EMAILS=

# GitHub Configuration (for deployment scripts)
GITHUB_REPOSITORY=
GITHUB_SHA=
GITHUB_TOKEN=

# Wrangler Port (for local development)
# Default: 8787
WRANGLER_PORT=8787

# =============================================================================
# Feature Flags (Set in wrangler.jsonc, but can be overridden)
# =============================================================================

# Environment ("development", "staging", "production")
ENVIRONMENT=staging

# Enable LLM research features
FEATURE_LLM_RESEARCH=true

# Enable options trading
FEATURE_OPTIONS=true

# =============================================================================
# Default Trading Parameters (Set in wrangler.jsonc, but can be overridden)
# =============================================================================

# Maximum position size as percentage of portfolio (0.10 = 10%)
DEFAULT_MAX_POSITION_PCT=0.10

# Maximum notional value per trade in USD
DEFAULT_MAX_NOTIONAL_PER_TRADE=5000

# Maximum daily loss as percentage of portfolio (0.02 = 2%)
DEFAULT_MAX_DAILY_LOSS_PCT=0.02

# Default cooldown period in minutes between trades
DEFAULT_COOLDOWN_MINUTES=30

# Maximum number of open positions
DEFAULT_MAX_OPEN_POSITIONS=10

# Default approval TTL in seconds
DEFAULT_APPROVAL_TTL_SECONDS=300
